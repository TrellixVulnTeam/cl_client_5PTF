{"version":3,"sources":["../../src/pages/service-order/service-order.module.ts","../../src/pages/service-order/service-order.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ServiceOrderPage } from './service-order';\n\n@NgModule({\n  declarations: [\n    ServiceOrderPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ServiceOrderPage),\n  ],\n})\nexport class ServiceOrderPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-order/service-order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ModalController } from 'ionic-angular';\nimport {\n GoogleMaps,\n GoogleMap,\n GoogleMapsEvent,\n GoogleMapOptions,\n} from '@ionic-native/google-maps';\nimport { Geolocation } from '@ionic-native/geolocation';\n\n/**\n * Generated class for the ServiceOrderPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-service-order',\n  templateUrl: 'service-order.html',\n})\nexport class ServiceOrderPage {\n  position_marker: any;\n  service_name : string;\n  category_id : string;\n  category_name : string;\n  category_price : string;\n  category_duration : string;\n  category_image: string;\n  service_id: string;\n  order_data = { };\n  map : GoogleMap;\n  lat: any;\n  long: any;\n  constructor(public navCtrl: NavController, public navParams: NavParams, private geolocation: Geolocation, private googleMaps: GoogleMaps, public loadCtr: LoadingController, public modal: ModalController) {\n    // this.loadMap();\n    //<!-- Build Order Object -->\n    this.order_data = {\n      service_name:  this.navParams.get('service_name'),\n      category_id:  this.navParams.get('category_id'),\n      category_name:  this.navParams.get('category_name'),\n      category_price:  this.navParams.get('category_price'),\n      service_id:  this.navParams.get('service_id'),\n      lat: this.lat,\n      lng: this.long\n\n    }\n\n    this.category_duration = this.navParams.get('category_duration');\n    this.category_image =  this.navParams.get('category_image');\n    this.category_price = this.navParams.get('category_price');\n    this.category_name = this.order_data['service_name'];\n\n\n  }\n\n  ionViewDidLoad() {\n    this.loadMap();\n  }\n\n  loadMap(){\n    let loading = this.loadCtr.create({\n      spinner: \"crescent\",\n      content: \"Obteniendo Ubicación\"\n    });\n\n    loading.present();\n    this.geolocation.getCurrentPosition().then((position) =>{\n\n      this.order_data['lat'] = position.coords.latitude;\n      this.order_data['lng'] = position.coords.longitude;\n\n      let map_options : GoogleMapOptions = {\n        camera: {\n          target: {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude,\n          },\n          zoom: 18,\n          tilt: 30\n        }\n      }\n\n        this.map =  this.googleMaps.create(document.getElementById(\"map_container\"), map_options);\n        this.map.one(GoogleMapsEvent.MAP_READY)\n        .then(()=>{\n          loading.dismiss();\n          alert(\"Para cambiar tu ubicación manten pulsado el pin del mapa y luego arrastra \")\n          this.map.addMarker({\n            title: \"Ubicación de servicio\",\n            icon: \"red\",\n            animation: \"DROP\",\n            position: {\n              lat: position.coords.latitude,\n              lng: position.coords.longitude,\n            }\n          }).then(marker =>{\n            marker.setDraggable(true);\n            this.position_marker = marker;\n            console.log(marker);\n\n            marker.on(GoogleMapsEvent.MARKER_DRAG_END).subscribe(() =>{\n              let markerCoords = marker.getPosition();\n              this.updateCoords(markerCoords.lat, markerCoords.lng);\n            });\n\n          });\n        });\n    });\n\n  }\n\n  updateCoords(lat: any, lng: any){\n    this.order_data['lat'] = lat;\n    this.order_data['lng'] = lng;\n\n    console.log(this.order_data['lat'],this.order_data['lng']);\n  }\n\n  reserveService(){\n    let order_build ={\n      cat_id: this.order_data['category_id'],\n      service_name: this.order_data['service_name'],\n      service_id: this.order_data['service_id'],\n      category_price: this.order_data['category_price'],\n      lat: this.order_data['lat'],\n      lng: this.order_data['lng']\n    }\n\n    this.navCtrl.push('ReservationPage', { order_build } );\n\n\n    // reserveModal.onDidDismiss(data => {\n    //   this.reservation_data = data;\n    // });\n  }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/service-order/service-order.ts"],"sourceRoot":""}